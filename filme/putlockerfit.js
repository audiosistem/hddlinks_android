function InvalidCharacterError(r){this.message=r}function btoa(r){for(var e,o,t=String(r),n=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";t.charAt(0|n)||(a="=",n%1);i+=a.charAt(63&e>>8-n%1*8)){if(255<(o=t.charCodeAt(n+=.75)))throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|o}return i}function atob(r){var e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,t,n=0,a=0,i="";t=e.charAt(a++);~t&&(o=n%4?64*o+t:t,n++%4)&&(i+=String.fromCharCode(255&o>>(-2*n&6))))t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return i}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";var Aes={cipher:function(r,e){for(var o=e.length/4-1,t=[[],[],[],[]],n=0;n<16;n++)t[n%4][Math.floor(n/4)]=r[n];t=Aes.addRoundKey(t,e,0,4);for(var a=1;a<o;a++)t=Aes.subBytes(t,4),t=Aes.shiftRows(t,4),t=Aes.mixColumns(t,4),t=Aes.addRoundKey(t,e,a,4);t=Aes.subBytes(t,4),t=Aes.shiftRows(t,4),t=Aes.addRoundKey(t,e,o,4);var i=new Array(16);for(n=0;n<16;n++)i[n]=t[n%4][Math.floor(n/4)];return i},keyExpansion:function(r){for(var e=r.length/4,o=6+e,t=new Array(4*(1+o)),n=new Array(4),a=0;a<e;a++){var i=[r[4*a],r[4*a+1],r[4*a+2],r[4*a+3]];t[a]=i}for(a=e;a<4*(1+o);a++){t[a]=new Array(4);for(var f=0;f<4;f++)n[f]=t[a-1][f];if(a%e==0){n=Aes.subWord(Aes.rotWord(n));for(f=0;f<4;f++)n[f]^=Aes.rCon[a/e][f]}else 6<e&&a%e==4&&(n=Aes.subWord(n));for(f=0;f<4;f++)t[a][f]=t[a-e][f]^n[f]}return t},subBytes:function(r,e){for(var o=0;o<4;o++)for(var t=0;t<e;t++)r[o][t]=Aes.sBox[r[o][t]];return r},shiftRows:function(r,e){for(var o=new Array(4),t=1;t<4;t++){for(var n=0;n<4;n++)o[n]=r[t][(n+t)%e];for(n=0;n<4;n++)r[t][n]=o[n]}return r},mixColumns:function(r,e){for(var o=0;o<4;o++){for(var t=new Array(4),n=new Array(4),a=0;a<4;a++)t[a]=r[a][o],n[a]=128&r[a][o]?r[a][o]<<1^283:r[a][o]<<1;r[0][o]=n[0]^t[1]^n[1]^t[2]^t[3],r[1][o]=t[0]^n[1]^t[2]^n[2]^t[3],r[2][o]=t[0]^t[1]^n[2]^t[3]^n[3],r[3][o]=t[0]^n[0]^t[1]^t[2]^n[3]}return r},addRoundKey:function(r,e,o,t){for(var n=0;n<4;n++)for(var a=0;a<t;a++)r[n][a]^=e[4*o+a][n];return r},subWord:function(r){for(var e=0;e<4;e++)r[e]=Aes.sBox[r[e]];return r},rotWord:function(r){for(var e=r[0],o=0;o<3;o++)r[o]=r[o+1];return r[3]=e,r},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ctr:{}};Aes.Ctr.encrypt=function(r,e,o){if(128!=o&&192!=o&&256!=o)throw new Error("Key size is not 128 / 192 / 256");r=String(r).utf8Encode(),e=String(e).utf8Encode();for(var t=o/8,n=new Array(t),a=0;a<t;a++)n[a]=a<e.length?e.charCodeAt(a):0;var i=Aes.cipher(n,Aes.keyExpansion(n));i=i.concat(i.slice(0,t-16)),console.log("Key is ="),console.log(JSON.stringify(i));var f=new Array(16),c=(new Date).getTime(),s=c%1e3,h=Math.floor(c/1e3),u=Math.floor(65535*Math.random());for(a=0;a<2;a++)f[a]=s>>>8*a&255;for(a=0;a<2;a++)f[a+2]=u>>>8*a&255;for(a=0;a<4;a++)f[a+4]=h>>>8*a&255;var d="";for(a=0;a<8;a++)d+=String.fromCharCode(f[a]);for(var S=Aes.keyExpansion(i),p=Math.ceil(r.length/16),A="",l=0;l<p;l++){for(var y=0;y<4;y++)f[15-y]=l>>>8*y&255;for(y=0;y<4;y++)f[15-y-4]=l/4294967296>>>8*y;var v=Aes.cipher(f,S),g=l<p-1?16:(r.length-1)%16+1,C=new Array(g);for(a=0;a<g;a++)C[a]=v[a]^r.charCodeAt(16*l+a),C[a]=String.fromCharCode(C[a]);A+=C.join(""),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&l%1e3==0&&self.postMessage({progress:l/p})}return A=(d+A).base64Encode()},Aes.Ctr.decrypt=function(r,e,o){if(128!=o&&192!=o&&256!=o)throw new Error("Key size is not 128 / 192 / 256");r=String(r).base64Decode(),e=String(e).utf8Encode();for(var t=o/8,n=new Array(t),a=0;a<t;a++)n[a]=a<e.length?e.charCodeAt(a):0;var i=Aes.cipher(n,Aes.keyExpansion(n));i=i.concat(i.slice(0,t-16));var f=new Array(8),c=r.slice(0,8);for(a=0;a<8;a++)f[a]=c.charCodeAt(a);for(var s=Aes.keyExpansion(i),h=Math.ceil((r.length-8)/16),u=new Array(h),d=0;d<h;d++)u[d]=r.slice(8+16*d,8+16*d+16);r=u;var S="";for(d=0;d<h;d++){for(var p=0;p<4;p++)f[15-p]=d>>>8*p&255;for(p=0;p<4;p++)f[15-p-4]=(d+1)/4294967296-1>>>8*p&255;var A=Aes.cipher(f,s),l=new Array(r[d].length);for(a=0;a<r[d].length;a++)l[a]=A[a]^r[d].charCodeAt(a),l[a]=String.fromCharCode(l[a]);S+=l.join(""),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&d%1e3==0&&self.postMessage({progress:d/h})}return S=S.utf8Decode()},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(r){return this}}),String.prototype.base64Encode=function(){return btoa(this)},String.prototype.base64Decode=function(){return atob(this)};var Sha256={hash:function(r){r=r.utf8Encode();for(var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t=(r+=String.fromCharCode(128)).length/4+2,n=Math.ceil(t/16),a=new Array(n),i=0;i<n;i++){a[i]=new Array(16);for(var f=0;f<16;f++)a[i][f]=r.charCodeAt(64*i+4*f)<<24|r.charCodeAt(64*i+4*f+1)<<16|r.charCodeAt(64*i+4*f+2)<<8|r.charCodeAt(64*i+4*f+3)}a[n-1][14]=8*(r.length-1)/Math.pow(2,32),a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=8*(r.length-1)&4294967295;var c,s,h,u,d,S,p,A,l=new Array(64);for(i=0;i<n;i++){for(var y=0;y<16;y++)l[y]=a[i][y];for(y=16;y<64;y++)l[y]=Sha256.σ1(l[y-2])+l[y-7]+Sha256.σ0(l[y-15])+l[y-16]&4294967295;c=o[0],s=o[1],h=o[2],u=o[3],d=o[4],S=o[5],p=o[6],A=o[7];for(y=0;y<64;y++){var v=A+Sha256.Σ1(d)+Sha256.Ch(d,S,p)+e[y]+l[y],g=Sha256.Σ0(c)+Sha256.Maj(c,s,h);A=p,p=S,S=d,d=u+v&4294967295,u=h,h=s,s=c,c=v+g&4294967295}o[0]=o[0]+c&4294967295,o[1]=o[1]+s&4294967295,o[2]=o[2]+h&4294967295,o[3]=o[3]+u&4294967295,o[4]=o[4]+d&4294967295,o[5]=o[5]+S&4294967295,o[6]=o[6]+p&4294967295,o[7]=o[7]+A&4294967295}return Sha256.toHexStr(o[0])+Sha256.toHexStr(o[1])+Sha256.toHexStr(o[2])+Sha256.toHexStr(o[3])+Sha256.toHexStr(o[4])+Sha256.toHexStr(o[5])+Sha256.toHexStr(o[6])+Sha256.toHexStr(o[7])},ROTR:function(r,e){return e>>>r|e<<32-r},"Σ0":function(r){return Sha256.ROTR(2,r)^Sha256.ROTR(13,r)^Sha256.ROTR(22,r)},"Σ1":function(r){return Sha256.ROTR(6,r)^Sha256.ROTR(11,r)^Sha256.ROTR(25,r)},"σ0":function(r){return Sha256.ROTR(7,r)^Sha256.ROTR(18,r)^r>>>3},"σ1":function(r){return Sha256.ROTR(17,r)^Sha256.ROTR(19,r)^r>>>10},Ch:function(r,e,o){return r&e^~r&o},Maj:function(r,e,o){return r&e^r&o^e&o},toHexStr:function(r){for(var e="",o=7;0<=o;o--)e+=(r>>>4*o&15).toString(16);return e}};void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(r){return this}});